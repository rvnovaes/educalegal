metadata:
  title: Termo de Confidencialidade Genérico
---
modules:
  - .element_educalegal_app
---
id: logic
mandatory: true
code: |
  if 'tid' in url_args:
    schema = "http://web:8000/api/docs"
    tenant_id = url_args['tid']
    params ={"id": tenant_id}
    tenant_data = get_tenant_data(schema, params)
    tenant_name = tenant_data['name']
    tenant_ged_url = tenant_data['ged_url']
    tenant_ged_token = tenant_data['ged_token']
    school_names = get_all_schools_names(schema, params)
    if len(school_names) > 1:
      selected_school
  else:
    invalid_tenant
---
question: Escolha a escola
field: selected_school
choices:
  code: |
    school_names
---

event: valid_tenant
question: Valid Tenant
subquestion: |
  * ${ tenant_id }
  * ${ tenant_name }
  * ${ tenant_ged_url }
  * ${ tenant_ged_token }
attachment:
  name: Termo de Confidencialidade - NDA
  language: pt
  filename: generic_nda
  docx template file: generic-nda.docx
  valid formats:
    - pdf
    - docx
buttons:
  - Exit: exit
---
event: invalid_tenant
question: Não é possível criar a entrevista
buttons:
  - Exit: exit