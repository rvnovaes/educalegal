FROM nginx
RUN mkdir -p /var/log/nginx && \
    mkdir -p /etc/letsencrypt/live/apptest.educalegal.com.br
# Na imagem do Docker nao existe sites-enabled ou sites-available. Fica dentro de conf.d
COPY *.conf /etc/nginx/conf.d/
COPY proxy_params /etc/nginx/
RUN openssl req -x509 -newkey rsa:2048 -nodes \
    -keyout /etc/letsencrypt/live/apptest.educalegal.com.br/privkey.pem \
    -out /etc/letsencrypt/live/apptest.educalegal.com.br/fullchain.pem -days 1 -subj '/CN=localhost'
RUN openssl dhparam -out /etc/ssl/certs/dhparam-2048.pem 2048


